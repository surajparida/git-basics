<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>

    <script>
        window.requirejs.config({
            enforceDefine: true,
            paths: {
                'SDK': './lib/SDK.min'
            }
        });

        window.requirejs(['SDK'], function (SDK) {
            if (typeof SDK !== 'undefined') {
                console.log("SDK is defined. Trying to initialize...");
                SDK.init();
                SDK.ready().then(() => {
                    console.log("SDK is ready");
                    document.getElementById("name").innerText = SDK.getUser().displayName;
                });
            } else {
                console.log('SDK is not defined');
            }
        });
    </script>
</head>

<body class="bg-slate-900 text-white min-h-screen p-6 font-sans">

<div class="max-w-4xl mx-auto bg-slate-800 rounded-xl shadow-lg p-8 space-y-6">

    <h2 class="text-2xl font-semibold text-blue-400">
        AI Work Item Assistant
    </h2>

    <!-- Work Item Type -->
    <div class="space-y-2">
        <label class="block text-sm font-medium">Work item type</label>
        <select id="witType"
                class="w-full rounded-md bg-slate-700 border border-slate-600 px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none">
            <option value="Product Backlog Item">PBI</option>
            <option value="Bug">Bug</option>
            <option value="Task">Task</option>
        </select>
    </div>

    <!-- Notes -->
    <div class="space-y-2">
        <label class="block text-sm font-medium">Notes / Meeting text</label>
        <textarea id="notes" rows="8"
                  placeholder="Paste notes here..."
                  class="w-full rounded-md bg-slate-700 border border-slate-600 px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none resize-none"></textarea>
    </div>

    <!-- Detail Mode -->
    <div class="space-y-2">
        <label class="block text-sm font-medium">Detail level</label>
        <select id="mode"
                class="w-full rounded-md bg-slate-700 border border-slate-600 px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none">
            <option value="standard">Standard</option>
            <option value="short">Short</option>
            <option value="detailed">Detailed</option>
        </select>
    </div>

    <!-- Buttons -->
    <div class="flex flex-wrap gap-3 pt-2">
        <button id="btnGenerate"
                class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md font-medium transition">
            Generate
        </button>

        <button id="btnCreate" disabled
                class="bg-green-600 hover:bg-green-700 disabled:bg-slate-600 disabled:cursor-not-allowed px-4 py-2 rounded-md font-medium transition">
            Create Work Item
        </button>

        <button id="btnCopy" disabled
                class="bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-600 disabled:cursor-not-allowed px-4 py-2 rounded-md font-medium transition">
            Copy JSON
        </button>
    </div>

    <!-- Status -->
    <div id="status" class="text-sm text-slate-300"></div>

    <hr class="border-slate-600" />

    <!-- Preview -->
    <div class="space-y-4">
        <h3 class="text-xl font-semibold text-blue-300">Preview</h3>

        <div>
            <span class="font-semibold">Title:</span>
            <span id="prevTitle" class="text-slate-200"></span>
        </div>

        <div>
            <div class="font-semibold">Description:</div>
            <div id="prevDesc"
                 class="bg-slate-700 p-3 rounded-md text-sm mt-1"></div>
        </div>

        <div>
            <div class="font-semibold">Acceptance Criteria:</div>
            <ul id="prevAc"
                class="list-disc list-inside text-sm mt-1 space-y-1 text-slate-200"></ul>
        </div>

        <div>
            <div class="font-semibold">Tasks:</div>
            <ul id="prevTasks"
                class="list-disc list-inside text-sm mt-1 space-y-1 text-slate-200"></ul>
        </div>

        <div>
            <span class="font-semibold">Tags:</span>
            <span id="prevTags" class="text-slate-200"></span>
        </div>
    </div>

</div>

</body>
</html>
